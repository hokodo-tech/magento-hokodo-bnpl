<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Copyright Â© 2018-2021 Hokodo. All Rights Reserved.
 * See LICENSE for license details.
 */
-->
<routes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Webapi:etc/webapi.xsd">
    <!-- Company search -->
    <route url="/V1/hokodo-company/search" method="GET">
        <service class="Hokodo\BNPL\Api\CompanySearchServiceInterface" method="search"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

    <!-- Create Hokodo customer for guest -->
    <route url="/V1/guest-customer/:cartId/set-hokodo-user" method="POST">
        <service class="Hokodo\BNPL\Api\GuestSetUserServiceInterface" method="setUser"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

    <!-- Create Hokodo customer for registered customer -->
    <route url="/V1/carts/mine/set-hokodo-user" method="POST">
        <service class="Hokodo\BNPL\Api\SetUserServiceInterface" method="setUser"/>
        <resources>
            <resource ref="self" />
        </resources>
        <data>
            <parameter name="cartId" force="true">%cart_id%</parameter>
        </data>
    </route>

    <!-- Create customer organization for guest -->
    <route url="/V1/guest-customer/:cartId/set-hokodo-user-organisation" method="POST">
        <service class="Hokodo\BNPL\Api\GuestSetOrganisationServiceInterface" method="setOrganisation"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

    <!-- Create customer organization for registered customer -->
    <route url="/V1/carts/mine/set-hokodo-user-organisation" method="POST">
        <service class="Hokodo\BNPL\Api\SetOrganisationServiceInterface" method="setOrganisation"/>
        <resources>
            <resource ref="self" />
        </resources>
        <data>
            <parameter name="cartId" force="true">%cart_id%</parameter>
        </data>
    </route>

    <!-- Create order for guest -->
    <route url="/V1/guest-customer/:cartId/set-hokodo-order" method="POST">
        <service class="Hokodo\BNPL\Api\GuestOrderInformationManagementInterface" method="setOrder"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

    <!-- Create order for registered customer -->
    <route url="/V1/carts/mine/set-hokodo-order" method="POST">
        <service class="Hokodo\BNPL\Api\OrderInformationManagementInterface" method="setOrder"/>
        <resources>
            <resource ref="self" />
        </resources>
        <data>
            <parameter name="cartId" force="true">%cart_id%</parameter>
        </data>
    </route>

    <!-- Request a new offer for guest -->
    <route url="/V1/guest-customer/:cartId/request-new-hokodo-offer" method="POST">
        <service class="Hokodo\BNPL\Api\GuestOrderInformationManagementInterface" method="requestNewOffer"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

    <!-- Request a new offer for registered customer -->
    <route url="/V1/carts/mine/request-new-hokodo-offer" method="POST">
        <service class="Hokodo\BNPL\Api\OrderInformationManagementInterface" method="requestNewOffer"/>
        <resources>
            <resource ref="self" />
        </resources>
        <data>
            <parameter name="cartId" force="true">%cart_id%</parameter>
            <parameter name="customerId" force="true">%customer_id%</parameter>
        </data>
    </route>

    <!-- Get offer for guest -->
    <route url="/V1/guest-customer/:cartId/get-hokodo-payment-offers/:offerId" method="GET">
        <service class="Hokodo\BNPL\Api\GuestOrderInformationManagementInterface" method="getPaymentOffer"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

    <!-- Request a new offer for registered customer -->
    <route url="/V1/carts/mine/get-hokodo-payment-offers/:offerId" method="GET">
        <service class="Hokodo\BNPL\Api\OrderInformationManagementInterface" method="getPaymentOffer"/>
        <resources>
            <resource ref="self" />
        </resources>
        <data>
            <parameter name="cartId" force="true">%cart_id%</parameter>
        </data>
    </route>

    <route url="/V1/deferredpayment/ipn" method="POST">
        <service class="Hokodo\BNPL\Api\DeferredPaymentIpnProcessorInterface" method="process"/>
        <resources>
            <resource ref="anonymous" />
        </resources>
    </route>

</routes>
